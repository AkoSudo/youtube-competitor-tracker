---
phase: 02-video-retrieval
plan: 04
type: execute
wave: 3
depends_on: ["02-01", "02-03"]
files_modified:
  - src/components/VideoCard.tsx
  - src/components/VideoGrid.tsx
autonomous: true

must_haves:
  truths:
    - "VideoCard displays thumbnail with duration badge"
    - "VideoCard shows title, view count, and relative date"
    - "Clicking VideoCard opens YouTube in new tab"
    - "VideoCard has Save Idea button"
    - "VideoGrid displays videos in responsive grid"
  artifacts:
    - path: "src/components/VideoCard.tsx"
      provides: "Individual video display component"
      exports: ["VideoCard"]
    - path: "src/components/VideoGrid.tsx"
      provides: "Responsive video grid layout"
      exports: ["VideoGrid"]
  key_links:
    - from: "src/components/VideoCard.tsx"
      to: "src/lib/formatters.ts"
      via: "import formatters"
      pattern: "import.*from.*formatters"
    - from: "src/components/VideoCard.tsx"
      to: "YouTube"
      via: "href to youtube.com/watch"
      pattern: "youtube\\.com/watch"
    - from: "src/components/VideoGrid.tsx"
      to: "src/components/VideoCard.tsx"
      via: "import VideoCard"
      pattern: "import.*VideoCard"
---

<objective>
Create VideoCard and VideoGrid components for displaying channel videos.

Purpose: VideoCard shows all metadata (thumbnail, duration, title, views, date) with link to YouTube. VideoGrid provides responsive layout using CSS Grid auto-fit. "Save Idea" button prepares for Phase 3.

Output: Reusable video display components ready for ChannelDetailPage.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02-video-retrieval/02-RESEARCH.md

# Types and formatters from plan 01
@src/lib/types.ts
@src/lib/formatters.ts

# Existing component patterns
@src/components/ChannelCard.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create VideoCard component</name>
  <files>src/components/VideoCard.tsx</files>
  <action>
Create src/components/VideoCard.tsx:

```tsx
import type { Video } from '../lib/types'
import { formatViewCount, formatDuration, formatRelativeDate } from '../lib/formatters'

interface VideoCardProps {
  video: Video
  onSaveIdea?: (video: Video) => void
}

/**
 * Displays a single video with thumbnail, duration badge, title, views, and date.
 * REQ-VID-004: Show thumbnail (16:9), duration badge, title (max 2 lines), view count, relative date
 * REQ-VID-005: Click thumbnail opens YouTube in new tab
 * REQ-VID-008: "Save Idea" button on each video card
 */
export function VideoCard({ video, onSaveIdea }: VideoCardProps) {
  const handleSaveIdea = (e: React.MouseEvent) => {
    e.preventDefault() // Prevent link navigation
    e.stopPropagation()
    onSaveIdea?.(video)
  }

  return (
    <div className="group">
      {/* Thumbnail with duration badge */}
      <a
        href={`https://www.youtube.com/watch?v=${video.youtube_id}`}
        target="_blank"
        rel="noopener noreferrer"
        className="block relative aspect-video overflow-hidden rounded-xl bg-[#272727]"
      >
        <img
          src={video.thumbnail_url}
          alt={video.title}
          className="h-full w-full object-cover transition-transform duration-200 group-hover:scale-105"
          loading="lazy"
        />
        {/* Duration badge */}
        <div className="absolute bottom-2 right-2 rounded bg-black/80 px-1.5 py-0.5 text-xs font-medium text-white">
          {formatDuration(video.duration_seconds)}
        </div>
      </a>

      {/* Video info */}
      <div className="mt-3 flex gap-3">
        <div className="flex-1 min-w-0">
          {/* Title - max 2 lines */}
          <a
            href={`https://www.youtube.com/watch?v=${video.youtube_id}`}
            target="_blank"
            rel="noopener noreferrer"
            className="block"
          >
            <h3
              className="text-sm font-medium leading-tight line-clamp-2 text-[#f1f1f1] hover:text-white"
              title={video.title}
            >
              {video.title}
            </h3>
          </a>

          {/* Views and date */}
          <p className="mt-1 text-xs text-[#aaaaaa]">
            {formatViewCount(video.view_count)} views • {formatRelativeDate(video.published_at)}
          </p>
        </div>

        {/* Save Idea button */}
        <button
          onClick={handleSaveIdea}
          className="flex-shrink-0 opacity-0 group-hover:opacity-100 transition-opacity h-fit p-2 rounded-lg hover:bg-[#3f3f3f] text-[#aaaaaa] hover:text-white"
          aria-label={`Save idea from "${video.title}"`}
          title="Save Idea"
        >
          <svg
            className="w-5 h-5"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              strokeLinecap="round"
              strokeLinejoin="round"
              strokeWidth={2}
              d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"
            />
          </svg>
        </button>
      </div>
    </div>
  )
}
```

Key implementation:
- Thumbnail with aspect-video (16:9) ratio
- Duration badge positioned bottom-right using `formatDuration(video.duration_seconds)` for MM:SS format
- Title with line-clamp-2 (max 2 lines)
- View count displayed using `formatViewCount(video.view_count)` for compact notation (1.2M, 500K)
- Publish date displayed using `formatRelativeDate(video.published_at)` for relative time (2 days ago)
- YouTube link opens in new tab (target="_blank" with rel="noopener noreferrer")
- Save Idea button appears on hover (opacity transition)
- onSaveIdea callback for Phase 3 integration
- Uses existing dark theme colors (#272727, #f1f1f1, #aaaaaa)

**IMPORTANT: All three formatters MUST be called, not just imported:**
- `formatDuration(video.duration_seconds)` → badge text
- `formatViewCount(video.view_count)` → views text
- `formatRelativeDate(video.published_at)` → date text
  </action>
  <verify>`npm run build` succeeds. Component imports correctly.</verify>
  <done>VideoCard component created with thumbnail, duration badge, title, views, date, YouTube link, and Save Idea button.</done>
</task>

<task type="auto">
  <name>Task 2: Create VideoGrid component</name>
  <files>src/components/VideoGrid.tsx</files>
  <action>
Create src/components/VideoGrid.tsx:

```tsx
import type { Video } from '../lib/types'
import { VideoCard } from './VideoCard'

interface VideoGridProps {
  videos: Video[]
  onSaveIdea?: (video: Video) => void
  emptyMessage?: string
}

/**
 * Displays videos in a responsive grid layout.
 * Uses CSS Grid auto-fit for automatic column adjustment.
 * REQ-VID-003: Display top 20 long-form videos
 */
export function VideoGrid({ videos, onSaveIdea, emptyMessage = 'No videos found' }: VideoGridProps) {
  if (videos.length === 0) {
    return (
      <div className="text-center py-12">
        <p className="text-[#aaaaaa]">{emptyMessage}</p>
      </div>
    )
  }

  return (
    <div className="grid grid-cols-[repeat(auto-fit,minmax(280px,1fr))] gap-6">
      {videos.map((video) => (
        <VideoCard key={video.id} video={video} onSaveIdea={onSaveIdea} />
      ))}
    </div>
  )
}
```

Key implementation:
- CSS Grid with auto-fit for responsive columns
- minmax(280px, 1fr) ensures good thumbnail size
- Empty state message when no videos
- Passes onSaveIdea to each VideoCard
- Mobile: 1 column, Tablet: 2-3 columns, Desktop: 4+ columns
  </action>
  <verify>`npm run build` succeeds. Component imports VideoCard correctly.</verify>
  <done>VideoGrid component created with responsive grid layout and empty state.</done>
</task>

</tasks>

<verification>
- [ ] src/components/VideoCard.tsx exists
- [ ] VideoCard displays thumbnail with duration badge
- [ ] VideoCard shows title (max 2 lines), views, relative date
- [ ] Clicking thumbnail opens YouTube in new tab
- [ ] Save Idea button visible on hover
- [ ] src/components/VideoGrid.tsx exists
- [ ] VideoGrid uses responsive CSS Grid
- [ ] VideoGrid handles empty state
- [ ] `npm run build` succeeds
</verification>

<success_criteria>
Video display components complete. VideoCard shows all REQ-VID-004 metadata. VideoGrid provides responsive layout. Ready for ChannelDetailPage integration.
</success_criteria>

<output>
After completion, create `.planning/phases/02-video-retrieval/02-04-SUMMARY.md`
</output>
